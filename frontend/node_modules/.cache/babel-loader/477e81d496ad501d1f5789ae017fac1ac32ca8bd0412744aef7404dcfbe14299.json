{"ast":null,"code":"import { Lookup } from \"./lookup\";\nvar ModuleActivationStore = function () {\n  function ModuleActivationStore() {\n    this._map = new Map();\n  }\n  ModuleActivationStore.prototype.remove = function (moduleId) {\n    if (this._map.has(moduleId)) {\n      var handlers = this._map.get(moduleId);\n      this._map.delete(moduleId);\n      return handlers;\n    }\n    return this._getEmptyHandlersStore();\n  };\n  ModuleActivationStore.prototype.addDeactivation = function (moduleId, serviceIdentifier, onDeactivation) {\n    this._getModuleActivationHandlers(moduleId).onDeactivations.add(serviceIdentifier, onDeactivation);\n  };\n  ModuleActivationStore.prototype.addActivation = function (moduleId, serviceIdentifier, onActivation) {\n    this._getModuleActivationHandlers(moduleId).onActivations.add(serviceIdentifier, onActivation);\n  };\n  ModuleActivationStore.prototype.clone = function () {\n    var clone = new ModuleActivationStore();\n    this._map.forEach(function (handlersStore, moduleId) {\n      clone._map.set(moduleId, {\n        onActivations: handlersStore.onActivations.clone(),\n        onDeactivations: handlersStore.onDeactivations.clone()\n      });\n    });\n    return clone;\n  };\n  ModuleActivationStore.prototype._getModuleActivationHandlers = function (moduleId) {\n    var moduleActivationHandlers = this._map.get(moduleId);\n    if (moduleActivationHandlers === undefined) {\n      moduleActivationHandlers = this._getEmptyHandlersStore();\n      this._map.set(moduleId, moduleActivationHandlers);\n    }\n    return moduleActivationHandlers;\n  };\n  ModuleActivationStore.prototype._getEmptyHandlersStore = function () {\n    var handlersStore = {\n      onActivations: new Lookup(),\n      onDeactivations: new Lookup()\n    };\n    return handlersStore;\n  };\n  return ModuleActivationStore;\n}();\nexport { ModuleActivationStore };","map":{"version":3,"names":["Lookup","ModuleActivationStore","_map","Map","prototype","remove","moduleId","has","handlers","get","delete","_getEmptyHandlersStore","addDeactivation","serviceIdentifier","onDeactivation","_getModuleActivationHandlers","onDeactivations","add","addActivation","onActivation","onActivations","clone","forEach","handlersStore","set","moduleActivationHandlers","undefined"],"sources":["../../src/container/module_activation_store.ts"],"sourcesContent":[null],"mappings":"AACA,SAASA,MAAM,QAAQ,UAAU;AAEjC,IAAAC,qBAAA;EAAA,SAAAA,sBAAA;IACU,KAAAC,IAAI,GAAG,IAAIC,GAAG,EAA+C;EA4DvE;EA1DSF,qBAAA,CAAAG,SAAA,CAAAC,MAAM,GAAb,UAAcC,QAAgB;IAC5B,IAAI,IAAI,CAACJ,IAAI,CAACK,GAAG,CAACD,QAAQ,CAAC,EAAE;MAC3B,IAAME,QAAQ,GAAG,IAAI,CAACN,IAAI,CAACO,GAAG,CAACH,QAAQ,CAAC;MACxC,IAAI,CAACJ,IAAI,CAACQ,MAAM,CAACJ,QAAQ,CAAC;MAC1B,OAAOE,QAAS;;IAElB,OAAO,IAAI,CAACG,sBAAsB,EAAE;EACtC,CAAC;EAEMV,qBAAA,CAAAG,SAAA,CAAAQ,eAAe,GAAtB,UACEN,QAAgB,EAChBO,iBAAwD,EACxDC,cAAuD;IAEvD,IAAI,CAACC,4BAA4B,CAACT,QAAQ,CAAC,CACxCU,eAAe,CAACC,GAAG,CAACJ,iBAAiB,EAAEC,cAAc,CAAC;EAC3D,CAAC;EAEMb,qBAAA,CAAAG,SAAA,CAAAc,aAAa,GAApB,UACEZ,QAAgB,EAChBO,iBAAwD,EACxDM,YAAmD;IAEnD,IAAI,CAACJ,4BAA4B,CAACT,QAAQ,CAAC,CACxCc,aAAa,CAACH,GAAG,CAACJ,iBAAiB,EAAEM,YAAY,CAAC;EACvD,CAAC;EAEMlB,qBAAA,CAAAG,SAAA,CAAAiB,KAAK,GAAZ;IACE,IAAMA,KAAK,GAAG,IAAIpB,qBAAqB,EAAE;IAEzC,IAAI,CAACC,IAAI,CAACoB,OAAO,CAAC,UAACC,aAAa,EAAEjB,QAAQ;MACxCe,KAAK,CAACnB,IAAI,CAACsB,GAAG,CAAClB,QAAQ,EAAE;QACvBc,aAAa,EAAEG,aAAa,CAACH,aAAa,CAACC,KAAK,EAAE;QAClDL,eAAe,EAAEO,aAAa,CAACP,eAAe,CAACK,KAAK;OACrD,CAAC;IACJ,CAAC,CAAC;IAEF,OAAOA,KAAK;EACd,CAAC;EAEOpB,qBAAA,CAAAG,SAAA,CAAAW,4BAA4B,GAApC,UAAqCT,QAAgB;IACnD,IAAImB,wBAAwB,GAAoD,IAAI,CAACvB,IAAI,CAACO,GAAG,CAACH,QAAQ,CAAC;IAEvG,IAAImB,wBAAwB,KAAKC,SAAS,EAAE;MAC1CD,wBAAwB,GAAG,IAAI,CAACd,sBAAsB,EAAE;MACxD,IAAI,CAACT,IAAI,CAACsB,GAAG,CAAClB,QAAQ,EAAEmB,wBAAwB,CAAC;;IAGnD,OAAOA,wBAAwB;EACjC,CAAC;EAEOxB,qBAAA,CAAAG,SAAA,CAAAO,sBAAsB,GAA9B;IACE,IAAMY,aAAa,GAAwC;MACzDH,aAAa,EAAE,IAAIpB,MAAM,EAAE;MAC3BgB,eAAe,EAAE,IAAIhB,MAAM;KAC5B;IACD,OAAOuB,aAAa;EACtB,CAAC;EACH,OAAAtB,qBAAC;AAAD,CAAC,CA7DD"},"metadata":{},"sourceType":"module","externalDependencies":[]}