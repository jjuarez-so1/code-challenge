{"ast":null,"code":"import _initializerDefineProperty from \"/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _dec, _dec2, _class, _class2, _descriptor, _dec3, _dec4, _class4, _class5, _descriptor2, _dec5, _dec6, _class7, _class8, _descriptor3;\nimport { injectable, inject } from \"inversify\";\nimport \"reflect-metadata\";\nimport { TYPES } from \"./types\";\nimport axios from \"axios\";\nlet KpiRepositoryImpl = (_dec = injectable(), _dec2 = inject(TYPES.ApiBaseUrl), _dec(_class = (_class2 = class KpiRepositoryImpl {\n  constructor() {\n    _initializerDefineProperty(this, \"_apiUrl\", _descriptor, this);\n  }\n  async fetchKpis() {\n    try {\n      const response = await axios.get(`${this._apiUrl}/kpis`);\n      return response.data;\n    } catch (error) {\n      throw new Error(\"Error fetching KPIs\");\n    }\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"_apiUrl\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nlet NotificationsRepositoryImpl = (_dec3 = injectable(), _dec4 = inject(TYPES.ApiBaseUrl), _dec3(_class4 = (_class5 = class NotificationsRepositoryImpl {\n  constructor() {\n    _initializerDefineProperty(this, \"_apiUrl\", _descriptor2, this);\n  }\n  async sendNotification(topic, message) {\n    try {\n      const notificationData = {\n        category: topic,\n        message: message\n      };\n      await axios.post(`${this._apiUrl}/notifications/send`, notificationData);\n    } catch (error) {\n      throw new Error(\"Error sending notification\");\n    }\n  }\n  async getLastNotifications() {\n    try {\n      const response = await axios.get(`${this._apiUrl}/notifications/last`);\n      return response.data;\n    } catch (error) {\n      console.error(\"Error fetching last notifications\", error);\n      throw new Error(\"Error fetching last notifications\");\n    }\n  }\n}, (_descriptor2 = _applyDecoratedDescriptor(_class5.prototype, \"_apiUrl\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class5)) || _class4);\nlet MessagesRepositoryImpl = (_dec5 = injectable(), _dec6 = inject(TYPES.ApiBaseUrl), _dec5(_class7 = (_class8 = class MessagesRepositoryImpl {\n  constructor() {\n    _initializerDefineProperty(this, \"_apiUrl\", _descriptor3, this);\n  }\n  async getMessagesByNotification(notificationId, page, pageSize) {\n    try {\n      const response = await fetch(`${this._apiUrl}/messages/by-notification?notificationId=${notificationId}&page=${page}&pageSize=${pageSize}`);\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const responseData = await response.json();\n      return responseData;\n    } catch (error) {\n      console.error(\"Error fetching data\", error);\n      return {\n        messages: [],\n        totalCount: 0\n      };\n    }\n  }\n}, (_descriptor3 = _applyDecoratedDescriptor(_class8.prototype, \"_apiUrl\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class8)) || _class7);\nexport { KpiRepositoryImpl, NotificationsRepositoryImpl, MessagesRepositoryImpl };","map":{"version":3,"names":["injectable","inject","TYPES","axios","KpiRepositoryImpl","_dec","_dec2","ApiBaseUrl","_class","_class2","constructor","_initializerDefineProperty","_descriptor","fetchKpis","response","get","_apiUrl","data","error","Error","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","NotificationsRepositoryImpl","_dec3","_dec4","_class4","_class5","_descriptor2","sendNotification","topic","message","notificationData","category","post","getLastNotifications","console","MessagesRepositoryImpl","_dec5","_dec6","_class7","_class8","_descriptor3","getMessagesByNotification","notificationId","page","pageSize","fetch","ok","responseData","json","messages","totalCount"],"sources":["/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/src/inversify/entities.ts"],"sourcesContent":["import { injectable, inject } from \"inversify\";\nimport \"reflect-metadata\";\nimport { MessagesRepository, MessagesResponse, Notification, NotificationsRepository } from \"./interfaces\";\nimport { TYPES } from \"./types\";\n\nimport KpiData from \"../dtos/KpiDataDTO\";\nimport axios from \"axios\";\nimport { KpiRepository } from \"../repositories/KpiRepository\";\n\n@injectable()\nclass KpiRepositoryImpl implements KpiRepository {\n    @inject(TYPES.ApiBaseUrl) private _apiUrl: string | any;\n\n    async fetchKpis(): Promise<KpiData> {\n        try {\n            const response = await axios.get(`${this._apiUrl}/kpis`);\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Error fetching KPIs\");\n        }\n    }\n}\n\n@injectable()\nclass NotificationsRepositoryImpl implements NotificationsRepository {\n    @inject(TYPES.ApiBaseUrl) private _apiUrl: string | any;\n\n    async sendNotification(topic: string, message: string): Promise<void> {\n        try {\n            const notificationData = {\n                category: topic,\n                message: message,\n            };\n\n            await axios.post(\n                `${this._apiUrl}/notifications/send`,\n                notificationData\n            );\n        } catch (error) {\n            throw new Error(\"Error sending notification\");\n        }\n    }\n\n    async getLastNotifications(): Promise<Notification[]> {\n      try {\n        const response = await axios.get<Notification[]>(\n          `${this._apiUrl}/notifications/last`\n        );\n        return response.data;\n      } catch (error) {\n        console.error(\"Error fetching last notifications\", error);\n        throw new Error(\"Error fetching last notifications\");\n      }\n    }\n}\n\n@injectable()\nclass MessagesRepositoryImpl implements MessagesRepository {\n  @inject(TYPES.ApiBaseUrl) private _apiUrl: string | any;\n  async getMessagesByNotification(notificationId: number, page: number, pageSize: number): Promise<MessagesResponse> {\n    try {\n      const response = await fetch(\n        `${this._apiUrl}/messages/by-notification?notificationId=${notificationId}&page=${page}&pageSize=${pageSize}`\n      );\n\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n\n      const responseData: MessagesResponse = await response.json();\n      return responseData;\n    } catch (error) {\n      console.error(\"Error fetching data\", error);\n      return {\n        messages: [],\n        totalCount: 0,\n      };\n    }\n  }\n}\n\nexport { KpiRepositoryImpl, NotificationsRepositoryImpl, MessagesRepositoryImpl };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}