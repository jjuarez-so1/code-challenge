{"ast":null,"code":"import * as ERROR_MSGS from \"../constants/error_msgs\";\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n  if (typeof serviceIdentifier === \"function\") {\n    var _serviceIdentifier = serviceIdentifier;\n    return _serviceIdentifier.name;\n  } else if (typeof serviceIdentifier === \"symbol\") {\n    return serviceIdentifier.toString();\n  } else {\n    var _serviceIdentifier = serviceIdentifier;\n    return _serviceIdentifier;\n  }\n}\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n  var registeredBindingsList = \"\";\n  var registeredBindings = getBindings(container, serviceIdentifier);\n  if (registeredBindings.length !== 0) {\n    registeredBindingsList = \"\\nRegistered bindings:\";\n    registeredBindings.forEach(function (binding) {\n      var name = \"Object\";\n      if (binding.implementationType !== null) {\n        name = getFunctionName(binding.implementationType);\n      }\n      registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n      if (binding.constraint.metaData) {\n        registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n      }\n    });\n  }\n  return registeredBindingsList;\n}\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n  if (request.parentRequest === null) {\n    return false;\n  } else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n    return true;\n  } else {\n    return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n  }\n}\nfunction dependencyChainToString(request) {\n  function _createStringArr(req, result) {\n    if (result === void 0) {\n      result = [];\n    }\n    var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n    result.push(serviceIdentifier);\n    if (req.parentRequest !== null) {\n      return _createStringArr(req.parentRequest, result);\n    }\n    return result;\n  }\n  var stringArr = _createStringArr(request);\n  return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n  request.childRequests.forEach(function (childRequest) {\n    if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n      var services = dependencyChainToString(childRequest);\n      throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n    } else {\n      circularDependencyToException(childRequest);\n    }\n  });\n}\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n  if (target.isTagged() || target.isNamed()) {\n    var m_1 = \"\";\n    var namedTag = target.getNamedTag();\n    var otherTags = target.getCustomTags();\n    if (namedTag !== null) {\n      m_1 += namedTag.toString() + \"\\n\";\n    }\n    if (otherTags !== null) {\n      otherTags.forEach(function (tag) {\n        m_1 += tag.toString() + \"\\n\";\n      });\n    }\n    return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n  } else {\n    return \" \" + serviceIdentifierString;\n  }\n}\nfunction getFunctionName(func) {\n  if (func.name) {\n    return func.name;\n  } else {\n    var name_1 = func.toString();\n    var match = name_1.match(/^function\\s*([^\\s(]+)/);\n    return match ? match[1] : \"Anonymous function: \" + name_1;\n  }\n}\nfunction getSymbolDescription(symbol) {\n  return symbol.toString().slice(7, -1);\n}\nexport { getFunctionName, getServiceIdentifierAsString, listRegisteredBindingsForServiceIdentifier, listMetadataForTarget, circularDependencyToException, getSymbolDescription };","map":{"version":3,"names":["ERROR_MSGS","getServiceIdentifierAsString","serviceIdentifier","_serviceIdentifier","name","toString","listRegisteredBindingsForServiceIdentifier","container","getBindings","registeredBindingsList","registeredBindings","length","forEach","binding","implementationType","getFunctionName","constraint","metaData","alreadyDependencyChain","request","parentRequest","dependencyChainToString","_createStringArr","req","result","push","stringArr","reverse","join","circularDependencyToException","childRequests","childRequest","services","Error","CIRCULAR_DEPENDENCY","listMetadataForTarget","serviceIdentifierString","target","isTagged","isNamed","m_1","namedTag","getNamedTag","otherTags","getCustomTags","tag","func","name_1","match","getSymbolDescription","symbol","slice"],"sources":["../../src/utils/serialization.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}