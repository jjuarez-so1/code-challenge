{"ast":null,"code":"import _initializerDefineProperty from \"/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _dec, _dec2, _class, _class2, _descriptor, _dec3, _dec4, _class4, _class5, _descriptor2, _dec5, _class7;\nimport { injectable, inject } from \"inversify\";\nimport \"reflect-metadata\";\nimport { TYPES } from \"./types\";\nimport axios from \"axios\";\nlet KpiRepositoryImpl = (_dec = injectable(), _dec2 = inject(TYPES.ApiBaseUrl), _dec(_class = (_class2 = class KpiRepositoryImpl {\n  constructor() {\n    _initializerDefineProperty(this, \"_apiUrl\", _descriptor, this);\n  }\n  async fetchKpis() {\n    console.log('from kpis');\n    try {\n      const response = await axios.get(`${this._apiUrl}/kpis`);\n      return response.data;\n    } catch (error) {\n      throw new Error(\"Error fetching KPIs\");\n    }\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"_apiUrl\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nlet NotificationsRepositoryImpl = (_dec3 = injectable(), _dec4 = inject(TYPES.ApiBaseUrl), _dec3(_class4 = (_class5 = class NotificationsRepositoryImpl {\n  constructor() {\n    _initializerDefineProperty(this, \"_apiUrl\", _descriptor2, this);\n  }\n  async sendNotification(topic, message) {\n    console.log('using my super repo');\n    try {\n      const notificationData = {\n        category: topic,\n        message: message\n      };\n      await axios.post(`${this._apiUrl}/notifications/send`, notificationData);\n    } catch (error) {\n      throw new Error(\"Error sending notification\");\n    }\n  }\n}, (_descriptor2 = _applyDecoratedDescriptor(_class5.prototype, \"_apiUrl\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class5)) || _class4);\nlet MessageRepositoryImpl = (_dec5 = injectable(), _dec5(_class7 = class MessageRepositoryImpl {\n  async getMessagesByNotification(notificationId, page, pageSize) {\n    try {\n      const response = await fetch(`http://localhost:8080/api/messages/by-notification?notificationId=${notificationId}&page=${page}&pageSize=${pageSize}`);\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const responseData = await response.json();\n      return responseData;\n    } catch (error) {\n      console.error(\"Error fetching data\", error);\n      return {\n        messages: [],\n        totalCount: 0\n      };\n    }\n  }\n}) || _class7);\nexport { KpiRepositoryImpl, NotificationsRepositoryImpl };","map":{"version":3,"names":["injectable","inject","TYPES","axios","KpiRepositoryImpl","_dec","_dec2","ApiBaseUrl","_class","_class2","constructor","_initializerDefineProperty","_descriptor","fetchKpis","console","log","response","get","_apiUrl","data","error","Error","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","NotificationsRepositoryImpl","_dec3","_dec4","_class4","_class5","_descriptor2","sendNotification","topic","message","notificationData","category","post","MessageRepositoryImpl","_dec5","_class7","getMessagesByNotification","notificationId","page","pageSize","fetch","ok","responseData","json","messages","totalCount"],"sources":["/Users/josephjuarez/Documents/Dev/jja/notifications-code-challenge/gila-front/src/inversify/entities.ts"],"sourcesContent":["import { injectable, inject } from \"inversify\";\nimport \"reflect-metadata\";\nimport { MessageRepository, MessagesResponse, NotificationsRepository } from \"./interfaces\";\nimport { TYPES } from \"./types\";\nimport { KpiRepository } from \"../repository/KpiRepository\";\nimport KpiData from \"../components/kpi-cards/KpiData\";\nimport axios from \"axios\";\n\n@injectable()\nclass KpiRepositoryImpl implements KpiRepository {\n    @inject(TYPES.ApiBaseUrl) private _apiUrl: string | any;\n\n    async fetchKpis(): Promise<KpiData> {\n        console.log('from kpis');\n        try {\n            const response = await axios.get(`${this._apiUrl}/kpis`);\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Error fetching KPIs\");\n        }\n    }\n}\n\n@injectable()\nclass NotificationsRepositoryImpl implements NotificationsRepository {\n    @inject(TYPES.ApiBaseUrl) private _apiUrl: string | any;\n\n    async sendNotification(topic: string, message: string): Promise<void> {\n        console.log('using my super repo');\n        try {\n            const notificationData = {\n                category: topic,\n                message: message,\n            };\n\n            await axios.post(\n                `${this._apiUrl}/notifications/send`,\n                notificationData\n            );\n        } catch (error) {\n            throw new Error(\"Error sending notification\");\n        }\n    }\n}\n\n@injectable()\nclass MessageRepositoryImpl implements MessageRepository {\n    async getMessagesByNotification(notificationId: number, page: number, pageSize: number): Promise<MessagesResponse> {\n        try {\n          const response = await fetch(\n            `http://localhost:8080/api/messages/by-notification?notificationId=${notificationId}&page=${page}&pageSize=${pageSize}`\n          );\n    \n          if (!response.ok) {\n            throw new Error('Network response was not ok');\n          }\n    \n          const responseData: MessagesResponse = await response.json();\n          return responseData;\n        } catch (error) {\n          console.error(\"Error fetching data\", error);\n          return {\n            messages: [],\n            totalCount: 0,\n          };\n        }\n      }\n}\n\nexport { KpiRepositoryImpl, NotificationsRepositoryImpl };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}