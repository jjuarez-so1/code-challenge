{"ast":null,"code":"import * as ERROR_MSGS from \"../constants/error_msgs\";\nimport { isClonable } from \"../utils/clonable\";\nvar Lookup = function () {\n  function Lookup() {\n    this._map = new Map();\n  }\n  Lookup.prototype.getMap = function () {\n    return this._map;\n  };\n  Lookup.prototype.add = function (serviceIdentifier, value) {\n    if (serviceIdentifier === null || serviceIdentifier === undefined) {\n      throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n    }\n    if (value === null || value === undefined) {\n      throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n    }\n    var entry = this._map.get(serviceIdentifier);\n    if (entry !== undefined) {\n      entry.push(value);\n    } else {\n      this._map.set(serviceIdentifier, [value]);\n    }\n  };\n  Lookup.prototype.get = function (serviceIdentifier) {\n    if (serviceIdentifier === null || serviceIdentifier === undefined) {\n      throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n    }\n    var entry = this._map.get(serviceIdentifier);\n    if (entry !== undefined) {\n      return entry;\n    } else {\n      throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n    }\n  };\n  Lookup.prototype.remove = function (serviceIdentifier) {\n    if (serviceIdentifier === null || serviceIdentifier === undefined) {\n      throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n    }\n    if (!this._map.delete(serviceIdentifier)) {\n      throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n    }\n  };\n  Lookup.prototype.removeIntersection = function (lookup) {\n    var _this = this;\n    this.traverse(function (serviceIdentifier, value) {\n      var lookupActivations = lookup.hasKey(serviceIdentifier) ? lookup.get(serviceIdentifier) : undefined;\n      if (lookupActivations !== undefined) {\n        var filteredValues = value.filter(function (lookupValue) {\n          return !lookupActivations.some(function (moduleActivation) {\n            return lookupValue === moduleActivation;\n          });\n        });\n        _this._setValue(serviceIdentifier, filteredValues);\n      }\n    });\n  };\n  Lookup.prototype.removeByCondition = function (condition) {\n    var _this = this;\n    var removals = [];\n    this._map.forEach(function (entries, key) {\n      var updatedEntries = [];\n      for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n        var entry = entries_1[_i];\n        var remove = condition(entry);\n        if (remove) {\n          removals.push(entry);\n        } else {\n          updatedEntries.push(entry);\n        }\n      }\n      _this._setValue(key, updatedEntries);\n    });\n    return removals;\n  };\n  Lookup.prototype.hasKey = function (serviceIdentifier) {\n    if (serviceIdentifier === null || serviceIdentifier === undefined) {\n      throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n    }\n    return this._map.has(serviceIdentifier);\n  };\n  Lookup.prototype.clone = function () {\n    var copy = new Lookup();\n    this._map.forEach(function (value, key) {\n      value.forEach(function (b) {\n        return copy.add(key, isClonable(b) ? b.clone() : b);\n      });\n    });\n    return copy;\n  };\n  Lookup.prototype.traverse = function (func) {\n    this._map.forEach(function (value, key) {\n      func(key, value);\n    });\n  };\n  Lookup.prototype._setValue = function (serviceIdentifier, value) {\n    if (value.length > 0) {\n      this._map.set(serviceIdentifier, value);\n    } else {\n      this._map.delete(serviceIdentifier);\n    }\n  };\n  return Lookup;\n}();\nexport { Lookup };","map":{"version":3,"names":["ERROR_MSGS","isClonable","Lookup","_map","Map","prototype","getMap","add","serviceIdentifier","value","undefined","Error","NULL_ARGUMENT","entry","get","push","set","KEY_NOT_FOUND","remove","delete","removeIntersection","lookup","_this","traverse","lookupActivations","hasKey","filteredValues","filter","lookupValue","some","moduleActivation","_setValue","removeByCondition","condition","removals","forEach","entries","key","updatedEntries","_i","entries_1","length","has","clone","copy","b","func"],"sources":["../../src/container/lookup.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,UAAU,MAAM,yBAAyB;AAErD,SAASC,UAAU,QAAQ,mBAAmB;AAE9C,IAAAC,MAAA;EAKE,SAAAA,OAAA;IACE,IAAI,CAACC,IAAI,GAAG,IAAIC,GAAG,EAAqC;EAC1D;EAEOF,MAAA,CAAAG,SAAA,CAAAC,MAAM,GAAb;IACE,OAAO,IAAI,CAACH,IAAI;EAClB,CAAC;EAGMD,MAAA,CAAAG,SAAA,CAAAE,GAAG,GAAV,UAAWC,iBAA+C,EAAEC,KAAQ;IAElE,IAAID,iBAAiB,KAAK,IAAI,IAAIA,iBAAiB,KAAKE,SAAS,EAAE;MACjE,MAAM,IAAIC,KAAK,CAACX,UAAU,CAACY,aAAa,CAAC;;IAG3C,IAAIH,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACzC,MAAM,IAAIC,KAAK,CAACX,UAAU,CAACY,aAAa,CAAC;;IAG3C,IAAMC,KAAK,GAAG,IAAI,CAACV,IAAI,CAACW,GAAG,CAACN,iBAAiB,CAAC;IAC9C,IAAIK,KAAK,KAAKH,SAAS,EAAE;MACvBG,KAAK,CAACE,IAAI,CAACN,KAAK,CAAC;KAClB,MAAM;MACL,IAAI,CAACN,IAAI,CAACa,GAAG,CAACR,iBAAiB,EAAE,CAACC,KAAK,CAAC,CAAC;;EAE7C,CAAC;EAGMP,MAAA,CAAAG,SAAA,CAAAS,GAAG,GAAV,UAAWN,iBAA+C;IAExD,IAAIA,iBAAiB,KAAK,IAAI,IAAIA,iBAAiB,KAAKE,SAAS,EAAE;MACjE,MAAM,IAAIC,KAAK,CAACX,UAAU,CAACY,aAAa,CAAC;;IAG3C,IAAMC,KAAK,GAAG,IAAI,CAACV,IAAI,CAACW,GAAG,CAACN,iBAAiB,CAAC;IAE9C,IAAIK,KAAK,KAAKH,SAAS,EAAE;MACvB,OAAOG,KAAK;KACb,MAAM;MACL,MAAM,IAAIF,KAAK,CAACX,UAAU,CAACiB,aAAa,CAAC;;EAE7C,CAAC;EAGMf,MAAA,CAAAG,SAAA,CAAAa,MAAM,GAAb,UAAcV,iBAA+C;IAE3D,IAAIA,iBAAiB,KAAK,IAAI,IAAIA,iBAAiB,KAAKE,SAAS,EAAE;MACjE,MAAM,IAAIC,KAAK,CAACX,UAAU,CAACY,aAAa,CAAC;;IAG3C,IAAI,CAAC,IAAI,CAACT,IAAI,CAACgB,MAAM,CAACX,iBAAiB,CAAC,EAAE;MACxC,MAAM,IAAIG,KAAK,CAACX,UAAU,CAACiB,aAAa,CAAC;;EAE7C,CAAC;EAEMf,MAAA,CAAAG,SAAA,CAAAe,kBAAkB,GAAzB,UAA0BC,MAA4B;IAAtD,IAAAC,KAAA;IAEE,IAAI,CAACC,QAAQ,CACX,UAACf,iBAAwD,EAAEC,KAAU;MACnE,IAAMe,iBAAiB,GAAGH,MAAM,CAACI,MAAM,CAACjB,iBAAiB,CAAC,GAAGa,MAAM,CAACP,GAAG,CAACN,iBAAiB,CAAC,GAAGE,SAAS;MACtG,IAAIc,iBAAiB,KAAKd,SAAS,EAAE;QACnC,IAAMgB,cAAc,GAAGjB,KAAK,CAACkB,MAAM,CACjC,UAACC,WAAW;UACV,QAACJ,iBAAiB,CAACK,IAAI,CAAC,UAACC,gBAAgB;YAAK,OAAAF,WAAW,KAAKE,gBAAgB;UAAhC,CAAgC,CAAC;QAA/E,CAA+E,CAClF;QAEDR,KAAI,CAACS,SAAS,CAACvB,iBAAiB,EAAEkB,cAAc,CAAC;;IAErD,CAAC,CACF;EACH,CAAC;EAEMxB,MAAA,CAAAG,SAAA,CAAA2B,iBAAiB,GAAxB,UAAyBC,SAA+B;IAAxD,IAAAX,KAAA;IACE,IAAMY,QAAQ,GAAQ,EAAE;IACxB,IAAI,CAAC/B,IAAI,CAACgC,OAAO,CAAC,UAACC,OAAO,EAAEC,GAAG;MAC7B,IAAMC,cAAc,GAAQ,EAAE;MAE9B,KAAoB,IAAAC,EAAA,IAAO,EAAPC,SAAA,GAAAJ,OAAO,EAAPG,EAAA,GAAAC,SAAA,CAAAC,MAAO,EAAPF,EAAA,EAAO,EAAE;QAAxB,IAAM1B,KAAK,GAAA2B,SAAA,CAAAD,EAAA;QACd,IAAMrB,MAAM,GAAGe,SAAS,CAACpB,KAAK,CAAC;QAC/B,IAAIK,MAAM,EAAE;UACVgB,QAAQ,CAACnB,IAAI,CAACF,KAAK,CAAC;SACrB,MAAM;UACLyB,cAAc,CAACvB,IAAI,CAACF,KAAK,CAAC;;;MAI9BS,KAAI,CAACS,SAAS,CAACM,GAAG,EAAEC,cAAc,CAAC;IACrC,CAAC,CAAC;IAEF,OAAOJ,QAAQ;EACjB,CAAC;EAGMhC,MAAA,CAAAG,SAAA,CAAAoB,MAAM,GAAb,UAAcjB,iBAA+C;IAE3D,IAAIA,iBAAiB,KAAK,IAAI,IAAIA,iBAAiB,KAAKE,SAAS,EAAE;MACjE,MAAM,IAAIC,KAAK,CAACX,UAAU,CAACY,aAAa,CAAC;;IAG3C,OAAO,IAAI,CAACT,IAAI,CAACuC,GAAG,CAAClC,iBAAiB,CAAC;EACzC,CAAC;EAIMN,MAAA,CAAAG,SAAA,CAAAsC,KAAK,GAAZ;IAEE,IAAMC,IAAI,GAAG,IAAI1C,MAAM,EAAK;IAE5B,IAAI,CAACC,IAAI,CAACgC,OAAO,CAAC,UAAC1B,KAAK,EAAE4B,GAAG;MAC3B5B,KAAK,CAAC0B,OAAO,CAAC,UAACU,CAAC;QAAK,OAAAD,IAAI,CAACrC,GAAG,CAAC8B,GAAG,EAAEpC,UAAU,CAAI4C,CAAC,CAAC,GAAGA,CAAC,CAACF,KAAK,EAAE,GAAGE,CAAC,CAAC;MAA/C,CAA+C,CAAC;IACvE,CAAC,CAAC;IAEF,OAAOD,IAAI;EACb,CAAC;EAEM1C,MAAA,CAAAG,SAAA,CAAAkB,QAAQ,GAAf,UAAgBuB,IAA6D;IAC3E,IAAI,CAAC3C,IAAI,CAACgC,OAAO,CAAC,UAAC1B,KAAK,EAAE4B,GAAG;MAC3BS,IAAI,CAACT,GAAG,EAAE5B,KAAK,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC;EAEOP,MAAA,CAAAG,SAAA,CAAA0B,SAAS,GAAjB,UAAkBvB,iBAAwD,EAAEC,KAAU;IACpF,IAAIA,KAAK,CAACgC,MAAM,GAAG,CAAC,EAAE;MACpB,IAAI,CAACtC,IAAI,CAACa,GAAG,CAACR,iBAAiB,EAAEC,KAAK,CAAC;KACxC,MAAM;MACL,IAAI,CAACN,IAAI,CAACgB,MAAM,CAACX,iBAAiB,CAAC;;EAEvC,CAAC;EAEH,OAAAN,MAAC;AAAD,CAAC,CAtID;AAwIA,SAASA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}