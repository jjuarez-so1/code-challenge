{"ast":null,"code":"import * as METADATA_KEY from '../constants/metadata_keys';\nimport { id } from '../utils/id';\nimport { getSymbolDescription } from '../utils/serialization';\nimport { Metadata } from './metadata';\nimport { QueryableString } from './queryable_string';\nvar Target = function () {\n  function Target(type, identifier, serviceIdentifier, namedOrTagged) {\n    this.id = id();\n    this.type = type;\n    this.serviceIdentifier = serviceIdentifier;\n    var queryableName = typeof identifier === 'symbol' ? getSymbolDescription(identifier) : identifier;\n    this.name = new QueryableString(queryableName || \"\");\n    this.identifier = identifier;\n    this.metadata = new Array();\n    var metadataItem = null;\n    if (typeof namedOrTagged === 'string') {\n      metadataItem = new Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n    } else if (namedOrTagged instanceof Metadata) {\n      metadataItem = namedOrTagged;\n    }\n    if (metadataItem !== null) {\n      this.metadata.push(metadataItem);\n    }\n  }\n  Target.prototype.hasTag = function (key) {\n    for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n      var m = _a[_i];\n      if (m.key === key) {\n        return true;\n      }\n    }\n    return false;\n  };\n  Target.prototype.isArray = function () {\n    return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n  };\n  Target.prototype.matchesArray = function (name) {\n    return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n  };\n  Target.prototype.isNamed = function () {\n    return this.hasTag(METADATA_KEY.NAMED_TAG);\n  };\n  Target.prototype.isTagged = function () {\n    return this.metadata.some(function (metadata) {\n      return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n        return metadata.key !== key;\n      });\n    });\n  };\n  Target.prototype.isOptional = function () {\n    return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n  };\n  Target.prototype.getNamedTag = function () {\n    if (this.isNamed()) {\n      return this.metadata.filter(function (m) {\n        return m.key === METADATA_KEY.NAMED_TAG;\n      })[0];\n    }\n    return null;\n  };\n  Target.prototype.getCustomTags = function () {\n    if (this.isTagged()) {\n      return this.metadata.filter(function (metadata) {\n        return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n          return metadata.key !== key;\n        });\n      });\n    } else {\n      return null;\n    }\n  };\n  Target.prototype.matchesNamedTag = function (name) {\n    return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n  };\n  Target.prototype.matchesTag = function (key) {\n    var _this = this;\n    return function (value) {\n      for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n        var m = _a[_i];\n        if (m.key === key && m.value === value) {\n          return true;\n        }\n      }\n      return false;\n    };\n  };\n  return Target;\n}();\nexport { Target };","map":{"version":3,"names":["METADATA_KEY","id","getSymbolDescription","Metadata","QueryableString","Target","type","identifier","serviceIdentifier","namedOrTagged","queryableName","name","metadata","Array","metadataItem","NAMED_TAG","push","prototype","hasTag","key","_i","_a","length","m","isArray","MULTI_INJECT_TAG","matchesArray","matchesTag","isNamed","isTagged","some","NON_CUSTOM_TAG_KEYS","every","isOptional","OPTIONAL_TAG","getNamedTag","filter","getCustomTags","matchesNamedTag","_this","value"],"sources":["../../src/planning/target.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,YAAY,MAAM,4BAA4B;AAE1D,SAASC,EAAE,QAAQ,aAAa;AAChC,SAASC,oBAAoB,QAAQ,wBAAwB;AAC7D,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,eAAe,QAAQ,oBAAoB;AAEpD,IAAAC,MAAA;EAUE,SAAAA,OACEC,IAA2B,EAC3BC,UAA2B,EAC3BC,iBAA+C,EAC/CC,aAAmC;IAGnC,IAAI,CAACR,EAAE,GAAGA,EAAE,EAAE;IACd,IAAI,CAACK,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAME,aAAa,GAAG,OAAOH,UAAU,KAAK,QAAQ,GAAGL,oBAAoB,CAACK,UAAU,CAAC,GAAGA,UAAU;IACpG,IAAI,CAACI,IAAI,GAAG,IAAIP,eAAe,CAACM,aAAa,IAAI,EAAE,CAAC;IACpD,IAAI,CAACH,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACK,QAAQ,GAAG,IAAIC,KAAK,EAAE;IAE3B,IAAIC,YAAY,GAA+B,IAAI;IAGnD,IAAI,OAAOL,aAAa,KAAK,QAAQ,EAAE;MACrCK,YAAY,GAAG,IAAIX,QAAQ,CAACH,YAAY,CAACe,SAAS,EAAEN,aAAa,CAAC;KACnE,MAAM,IAAIA,aAAa,YAAYN,QAAQ,EAAE;MAE5CW,YAAY,GAAGL,aAAa;;IAI9B,IAAIK,YAAY,KAAK,IAAI,EAAE;MACzB,IAAI,CAACF,QAAQ,CAACI,IAAI,CAACF,YAAY,CAAC;;EAGpC;EAEOT,MAAA,CAAAY,SAAA,CAAAC,MAAM,GAAb,UAAcC,GAAW;IACvB,KAAgB,IAAAC,EAAA,IAAa,EAAbC,EAAA,OAAI,CAACT,QAAQ,EAAbQ,EAAA,GAAAC,EAAA,CAAAC,MAAa,EAAbF,EAAA,EAAa,EAAE;MAA1B,IAAMG,CAAC,GAAAF,EAAA,CAAAD,EAAA;MACV,IAAIG,CAAC,CAACJ,GAAG,KAAKA,GAAG,EAAE;QACjB,OAAO,IAAI;;;IAGf,OAAO,KAAK;EACd,CAAC;EAEMd,MAAA,CAAAY,SAAA,CAAAO,OAAO,GAAd;IACE,OAAO,IAAI,CAACN,MAAM,CAAClB,YAAY,CAACyB,gBAAgB,CAAC;EACnD,CAAC;EAEMpB,MAAA,CAAAY,SAAA,CAAAS,YAAY,GAAnB,UAAoBf,IAA2C;IAC7D,OAAO,IAAI,CAACgB,UAAU,CAAC3B,YAAY,CAACyB,gBAAgB,CAAC,CAACd,IAAI,CAAC;EAC7D,CAAC;EAEMN,MAAA,CAAAY,SAAA,CAAAW,OAAO,GAAd;IACE,OAAO,IAAI,CAACV,MAAM,CAAClB,YAAY,CAACe,SAAS,CAAC;EAC5C,CAAC;EAEMV,MAAA,CAAAY,SAAA,CAAAY,QAAQ,GAAf;IACE,OAAO,IAAI,CAACjB,QAAQ,CAACkB,IAAI,CACvB,UAAClB,QAAQ;MAAK,OAAAZ,YAAY,CAAC+B,mBAAmB,CAACC,KAAK,CAAC,UAACb,GAAG;QAAK,OAAAP,QAAQ,CAACO,GAAG,KAAKA,GAAG;MAApB,CAAoB,CAAC;IAArE,CAAqE,CACpF;EACH,CAAC;EAEMd,MAAA,CAAAY,SAAA,CAAAgB,UAAU,GAAjB;IACE,OAAO,IAAI,CAACN,UAAU,CAAC3B,YAAY,CAACkC,YAAY,CAAC,CAAC,IAAI,CAAC;EACzD,CAAC;EAEM7B,MAAA,CAAAY,SAAA,CAAAkB,WAAW,GAAlB;IACE,IAAI,IAAI,CAACP,OAAO,EAAE,EAAE;MAClB,OAAO,IAAI,CAAChB,QAAQ,CAACwB,MAAM,CACzB,UAACb,CAAC;QAAK,OAAAA,CAAC,CAACJ,GAAG,KAAKnB,YAAY,CAACe,SAAS;MAAhC,CAAgC,CACxC,CAAC,CAAC,CAAgC;;IAErC,OAAO,IAAI;EACb,CAAC;EAEMV,MAAA,CAAAY,SAAA,CAAAoB,aAAa,GAApB;IACE,IAAI,IAAI,CAACR,QAAQ,EAAE,EAAE;MACnB,OAAO,IAAI,CAACjB,QAAQ,CAACwB,MAAM,CACzB,UAACxB,QAAQ;QAAK,OAAAZ,YAAY,CAAC+B,mBAAmB,CAACC,KAAK,CAAC,UAACb,GAAG;UAAK,OAAAP,QAAQ,CAACO,GAAG,KAAKA,GAAG;QAApB,CAAoB,CAAC;MAArE,CAAqE,CACpF;KACF,MAAM;MACL,OAAO,IAAI;;EAEf,CAAC;EAEMd,MAAA,CAAAY,SAAA,CAAAqB,eAAe,GAAtB,UAAuB3B,IAAY;IACjC,OAAO,IAAI,CAACgB,UAAU,CAAC3B,YAAY,CAACe,SAAS,CAAC,CAACJ,IAAI,CAAC;EACtD,CAAC;EAEMN,MAAA,CAAAY,SAAA,CAAAU,UAAU,GAAjB,UAAkBR,GAAW;IAA7B,IAAAoB,KAAA;IACE,OAAO,UAACC,KAAc;MACpB,KAAgB,IAAApB,EAAA,IAAa,EAAbC,EAAA,GAAAkB,KAAI,CAAC3B,QAAQ,EAAbQ,EAAA,GAAAC,EAAA,CAAAC,MAAa,EAAbF,EAAA,EAAa,EAAE;QAA1B,IAAMG,CAAC,GAAAF,EAAA,CAAAD,EAAA;QACV,IAAIG,CAAC,CAACJ,GAAG,KAAKA,GAAG,IAAII,CAAC,CAACiB,KAAK,KAAKA,KAAK,EAAE;UACtC,OAAO,IAAI;;;MAGf,OAAO,KAAK;IACd,CAAC;EACH,CAAC;EAEH,OAAAnC,MAAC;AAAD,CAAC,CA3GD;AA6GA,SAASA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}