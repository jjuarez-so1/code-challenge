{"ast":null,"code":"import * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nvar traverseAncerstors = function (request, constraint) {\n  var parent = request.parentRequest;\n  if (parent !== null) {\n    return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n  } else {\n    return false;\n  }\n};\nvar taggedConstraint = function (key) {\n  return function (value) {\n    var constraint = function (request) {\n      return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new Metadata(key, value);\n    return constraint;\n  };\n};\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nvar typeConstraint = function (type) {\n  return function (request) {\n    var binding = null;\n    if (request !== null) {\n      binding = request.bindings[0];\n      if (typeof type === \"string\") {\n        var serviceIdentifier = binding.serviceIdentifier;\n        return serviceIdentifier === type;\n      } else {\n        var constructor = request.bindings[0].implementationType;\n        return type === constructor;\n      }\n    }\n    return false;\n  };\n};\nexport { traverseAncerstors, taggedConstraint, namedConstraint, typeConstraint };","map":{"version":3,"names":["METADATA_KEY","Metadata","traverseAncerstors","request","constraint","parent","parentRequest","taggedConstraint","key","value","target","matchesTag","metaData","namedConstraint","NAMED_TAG","typeConstraint","type","binding","bindings","serviceIdentifier","constructor","implementationType"],"sources":["../../src/syntax/constraint_helpers.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,YAAY,MAAM,4BAA4B;AAE1D,SAASC,QAAQ,QAAQ,sBAAsB;AAE/C,IAAMC,kBAAkB,GAAG,SAAAA,CACzBC,OAA2B,EAC3BC,UAAyC;EAGzC,IAAMC,MAAM,GAAGF,OAAO,CAACG,aAAa;EACpC,IAAID,MAAM,KAAK,IAAI,EAAE;IACnB,OAAOD,UAAU,CAACC,MAAM,CAAC,GAAG,IAAI,GAAGH,kBAAkB,CAACG,MAAM,EAAED,UAAU,CAAC;GAC1E,MAAM;IACL,OAAO,KAAK;;AAEhB,CAAC;AAID,IAAMG,gBAAgB,GAAG,SAAAA,CAACC,GAA6B;EAAK,iBAACC,KAAc;IAEzE,IAAML,UAAU,GAAkC,SAAAA,CAACD,OAAkC;MACnF,OAAAA,OAAO,KAAK,IAAI,IAAIA,OAAO,CAACO,MAAM,KAAK,IAAI,IAAIP,OAAO,CAACO,MAAM,CAACC,UAAU,CAACH,GAAG,CAAC,CAACC,KAAK,CAAC;IAApF,CAAoF;IAEtFL,UAAU,CAACQ,QAAQ,GAAG,IAAIX,QAAQ,CAACO,GAAG,EAAEC,KAAK,CAAC;IAE9C,OAAOL,UAAU;EACnB,CAAC;AAR2D,CAQ3D;AAED,IAAMS,eAAe,GAAGN,gBAAgB,CAACP,YAAY,CAACc,SAAS,CAAC;AAEhE,IAAMC,cAAc,GAAG,SAAAA,CAACC,IAAgC;EAAK,iBAACb,OAAkC;IAI9F,IAAIc,OAAO,GAAuC,IAAI;IAEtD,IAAId,OAAO,KAAK,IAAI,EAAE;MACpBc,OAAO,GAAGd,OAAO,CAACe,QAAQ,CAAC,CAAC,CAAgC;MAC5D,IAAI,OAAOF,IAAI,KAAK,QAAQ,EAAE;QAC5B,IAAMG,iBAAiB,GAAGF,OAAO,CAACE,iBAAiB;QACnD,OAAOA,iBAAiB,KAAKH,IAAI;OAClC,MAAM;QACL,IAAMI,WAAW,GAAIjB,OAAO,CAACe,QAAQ,CAAC,CAAC,CAAiC,CAACG,kBAAkB;QAC3F,OAAOL,IAAI,KAAKI,WAAW;;;IAI/B,OAAO,KAAK;EACd,CAAC;AAlB4D,CAkB5D;AAED,SAASlB,kBAAkB,EAAEK,gBAAgB,EAAEM,eAAe,EAAEE,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}